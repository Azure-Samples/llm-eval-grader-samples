# <component>
$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: transformation
display_name: Execute data transformation and sampling logic(if needed) for evaluation data.
version: 1
is_deterministic: false # Whether to reuse the previous job's result if the component inputs didn't change.
type: command
inputs:
  bot_name:
    type: string
  app_types:
    type: string
  fact_schema_name:
    type: string
  fact_table_name:
    type: string
  columns:
    type: string
  evaluation_types:
    type: string
  start_date:
    type: string
  end_date:
    type: string
  key_vault_url:
    type: string

outputs:
  fact_evaluation_output:
    type: uri_folder
  dim_metadata_output:
    type: uri_folder
  dim_conversation_output:
    type: uri_folder
code: ../../src
environment:
  conda_file: ../../environments/conda.yml
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu22.04
command: >-
  python transform_data.py
  --bot_name "${{inputs.bot_name}}"
  --app_types "${{inputs.app_types}}"
  --fact_schema_name "${{inputs.fact_schema_name}}"
  --fact_table_name "${{inputs.fact_table_name}}"
  --columns "${{inputs.columns}}"
  --evaluation_types "${{inputs.evaluation_types}}"
  --start_date "${{inputs.start_date}}"
  --end_date "${{inputs.end_date}}"
  --key_vault_url "${{inputs.key_vault_url}}"
  --fact_evaluation_output "${{outputs.fact_evaluation_output}}"
  --dim_metadata_output "${{outputs.dim_metadata_output}}"
  --dim_conversation_output "${{outputs.dim_conversation_output}}"
# </component>
